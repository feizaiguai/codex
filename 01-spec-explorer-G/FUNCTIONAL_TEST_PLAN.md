# 01-spec-explorer 功能完整性测试计划

**测试时间**: 2025-12-17
**目标**: 验证所有核心功能正常工作

---

## 测试矩阵

| 测试ID | 模式 | 输入类型 | 交互 | 预期输出 | 状态 |
|--------|------|---------|------|----------|------|
| T1 | 架构文档 | test_architecture.md | ❌ 非交互 | DESIGN_DRAFT.md（完整字段） | ⏳ |
| T2 | 架构文档 | test_architecture.md | ✅ 交互 | DESIGN_DRAFT.md（缺口提问） | ⏳ |
| T3 | 文本描述 | 一句话项目描述 | ✅ 交互 | DESIGN_DRAFT.md（5轮提问） | ⏳ |
| T4 | 文本描述 | 一句话项目描述 | ❌ 非交互 | DESIGN_DRAFT.md（默认值） | ⏳ |

---

## 测试用例详情

### T1: 架构文档模式（非交互）

**命令**:
```bash
python spec_explorer.py --doc test_architecture.md --no-interactive
```

**预期结果**:
- ✅ 成功解析15+字段
- ✅ 零交互（不提问）
- ✅ 生成DESIGN_DRAFT.md
- ✅ 包含5个章节（需求概览、Impact、Flow、Domain、BDD）

**质量标准**:
- 目标用户：4个角色正确提取
- 核心功能：8个功能正确提取
- MVP范围：5个功能正确提取
- 技术挑战：5个挑战正确提取

---

### T2: 架构文档模式（交互）

**命令**:
```bash
python spec_explorer.py --doc test_incomplete_architecture.md
```

**输入文档**: 故意缺少"核心功能"和"MVP范围"字段

**预期结果**:
- ✅ 检测到2个字段缺失
- ✅ 仅对缺失字段提问（2轮）
- ✅ 生成DESIGN_DRAFT.md
- ✅ 合并文档数据+交互补充

---

### T3: 文本描述模式（交互）

**命令**:
```bash
python spec_explorer.py "构建一个在线教育平台，支持直播课程、作业管理和学习分析"
```

**预期结果**:
- ✅ 5轮交互提问
  - Q1: 核心问题？
  - Q2: 目标用户？
  - Q3: 核心价值？
  - Q4: 技术挑战？
  - Q5: MVP范围？
- ✅ 生成DESIGN_DRAFT.md
- ✅ 基于用户回答生成内容

---

### T4: 文本描述模式（非交互）

**命令**:
```bash
python spec_explorer.py "构建一个智能客服系统，支持自然语言理解和多轮对话" --no-interactive
```

**预期结果**:
- ✅ 零交互
- ✅ 生成DESIGN_DRAFT.md
- ✅ 使用增强的_clarify_non_interactive提取信息
  - _extract_users()
  - _extract_metrics()
  - _extract_features()
  - _extract_tech_challenges()

**质量标准**:
- 不应该全是"待定义用户"、"待定义价值"
- 应该从输入文本中提取关键词

---

## 验收标准

### 功能完整性（必须100%通过）

- [ ] T1通过：架构文档非交互模式
- [ ] T2通过：架构文档交互模式
- [ ] T3通过：文本描述交互模式
- [ ] T4通过：文本描述非交互模式

### 输出质量（至少80%达标）

**字段提取准确性**:
- [ ] 目标用户提取 ≥80%
- [ ] 核心功能提取 ≥80%
- [ ] MVP范围提取 ≥80%
- [ ] 技术挑战提取 ≥80%

**建模质量**:
- [ ] 用户故事数量 ≥10个
- [ ] 领域实体数量 ≥3个
- [ ] BDD场景数量 ≥5个

---

## 已知问题（可接受但需记录）

从之前测试发现的质量问题（B+级）：
1. ⚠️ 用户故事过于通用（"达成业务目标"）
2. ⚠️ 实体识别错误（功能被误认为实体）
3. ⚠️ 量化指标提取不完整（"-"占位）

这些问题不影响功能完整性，但影响输出质量。
