# Explainability Analyzer Skill - AI可解释性分析

**版本**: 2.0.0
**类型**: AI增强
**质量等级**: A+

## 📋 功能概述

AI模型决策透明化,提供SHAP/LIME分析和公平性检测。

### 核心能力

1. **SHAP/LIME分析** - 特征贡献度量化分析
2. **特征重要性** - 全局和局部特征影响排序
3. **偏差检测** - 性别/种族/年龄公平性分析
4. **反事实解释** - What-if分析和可操作建议
5. **合规报告** - GDPR/EU AI Act自动生成

## 🚀 使用方法

### Slash Command
```bash
/explain-ai [模型] [预测]
```

### 自然语言调用
```
解释这个AI决策
检测模型偏差
生成GDPR合规报告
```

## 📖 使用示例

### 示例:贷款审批解释
**输入**:
```
模型: 贷款审批模型
预测: 拒绝申请
申请人: 32岁,年收入$45K,信用分650
```

**输出**:
```markdown
# 决策解释报告

## 预测结果
- 决策: **拒绝贷款**
- 置信度: 87%

## 特征贡献度 (SHAP分析)

| 特征 | 影响 | 方向 | 说明 |
|------|------|------|------|
| 信用分数 | -0.45 | 👎 负面 | 650分低于推荐阈值(700) |
| 债务收入比 | -0.28 | 👎 负面 | 42%超过安全线(36%) |
| 年收入 | +0.15 | 👍 正面 | $45K符合基本要求 |
| 工作年限 | +0.08 | 👍 正面 | 5年工作稳定性良好 |

## 反事实分析
要获得贷款批准,最有效的改进:
1. 提高信用分数至700+ (影响: +0.45)
2. 降低债务收入比至35%以下 (影响: +0.28)

## 公平性检查
✅ 未检测到性别偏差 (p-value: 0.82)
✅ 未检测到年龄偏差 (p-value: 0.67)
```

## 🔍 分析方法

### 1. SHAP (SHapley Additive exPlanations)
```python
# 特征贡献分解
base_value = 0.5  # 基准概率
feature_contributions = {
  'credit_score': -0.45,
  'debt_ratio': -0.28,
  'income': +0.15,
  'employment': +0.08
}
final_prediction = base_value + sum(contributions)
# 0.5 - 0.45 - 0.28 + 0.15 + 0.08 = 0.0 (拒绝)
```

### 2. 公平性指标
```
Demographic Parity (人口统计平等):
  P(批准|男性) = 0.65
  P(批准|女性) = 0.63
  差异: 0.02 (< 0.1阈值,通过✅)

Equal Opportunity (机会均等):
  P(批准|男性且合格) = 0.92
  P(批准|女性且合格) = 0.90
  差异: 0.02 (通过✅)
```

### 3. 反事实解释
```
当前: 拒绝 (信用分650, 债务比42%)
如果: 信用分提升至700
结果: 批准 (置信度75%)

最小改动路径:
650 → 675 (50%批准概率)
675 → 700 (75%批准概率)
700 → 725 (90%批准概率)
```

## 📊 合规报告

### GDPR第22条合规
```markdown
# 自动化决策解释 (GDPR Article 22)

## 决策过程
本决策基于机器学习模型,使用以下数据:
- 信用历史 (权重: 45%)
- 财务状况 (权重: 35%)
- 就业信息 (权重: 20%)

## 人工复核权利
您有权要求人工复核本决策。

## 数据来源
- 信用评分: Experian信用局
- 收入验证: 银行流水
- 就业信息: 雇主证明

## 申诉流程
如对决策有异议,请联系: appeals@bank.com
```

## 🛠️ 最佳实践

1. **多方法验证**: SHAP+LIME交叉验证
2. **定期审计**: 每季度公平性检查
3. **人工复核**: 高风险决策人工介入
4. **透明沟通**: 用户友好的解释
5. **持续监控**: 生产环境偏差监控

## 🔗 与其他 Skills 配合

- `prompt-engineer`: LLM决策解释
- `ai-code-optimizer`: 模型性能优化
- `security-audit`: AI系统安全审计

---

**状态**: ✅ 生产就绪 | **质量等级**: A+
