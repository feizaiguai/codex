# 15-web-search Skill å®Œæ•´è¯Šæ–­æŠ¥å‘Š

**è¯Šæ–­æ—¥æœŸ**: 2025-12-16
**è¯Šæ–­ç›®çš„**: å“åº”ç”¨æˆ·"ä¸€æ¬¡è¿‡å¤„ç†å¥½"çš„è¦æ±‚ï¼Œå…¨é¢æ£€æŸ¥15-web-searchçš„å¯ç”¨æ€§

---

## ğŸ¯ æ ¸å¿ƒå‘ç°

### âœ… å¥½æ¶ˆæ¯ï¼š15-web-search **å·²ç»å®Œå…¨å¯ç”¨**ï¼

**å®é™…å¯ç”¨æ€§**: **A+çº§** - æ— éœ€ä»»ä½•å¤–éƒ¨é…ç½®ï¼Œç«‹å³å¯ç”¨

**è¯æ®**:
1. âœ… å·²å†…ç½®6ä¸ªæœç´¢APIçš„å¯†é’¥ï¼ˆconfig.pyï¼‰
2. âœ… ç®€åŒ–ç‰ˆsearch.pyå·¥ä½œæ­£å¸¸ï¼ˆå·²æµ‹è¯•éªŒè¯ï¼‰
3. âœ… æœç´¢é€Ÿåº¦ä¼˜ç§€ï¼ˆ1ç§’å†…è¿”å›ç»“æœï¼‰
4. âœ… æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼ˆjson/markdown/compactï¼‰

---

## ğŸ“Š æµ‹è¯•ç»“æœ

### æµ‹è¯•1: Fastæ¨¡å¼ï¼ˆä»…Braveå¼•æ“ï¼‰

```bash
python search.py "Python async programming" --mode fast --max-results 3 --output compact
```

**ç»“æœ**: âœ… **æˆåŠŸ** - 1.05ç§’è¿”å›3æ¡ç»“æœ
```
ğŸ” Python async programming (3 ç»“æœ, 1.05s)
1. [85] asyncio â€” Asynchronous I/O
   https://docs.python.org/3/library/asyncio.html
2. [85] Getting Started With Async Features in Python â€“ Real Python
   https://realpython.com/python-async-features/
3. [85] Concurrency and async / await - FastAPI
   https://fastapi.tiangolo.com/async/
```

### æµ‹è¯•2: Autoæ¨¡å¼ï¼ˆBrave + You.comï¼‰

```bash
python search.py "Claude Code skills" --mode auto --max-results 5 --output json
```

**ç»“æœ**: âœ… **æˆåŠŸ** - 0.96ç§’è¿”å›5æ¡ç»“æœ
- å¼•æ“: Brave Search
- ç»“æœè´¨é‡: é«˜åº¦ç›¸å…³ï¼ŒåŒ…å«å®˜æ–¹æ–‡æ¡£å’ŒGitHubä»“åº“

---

## ğŸ” ä»£ç ç»“æ„åˆ†æ

### æ–‡ä»¶æ¸…å•

```
15-web-search/
â”œâ”€â”€ search.py âœ… ç®€åŒ–ç‰ˆï¼Œç›´æ¥å¯ç”¨
â”œâ”€â”€ search_cli.py âš ï¸ å®Œæ•´ç‰ˆï¼Œæœ‰å¯¼å…¥é—®é¢˜
â”œâ”€â”€ main.py âœ… æ ¸å¿ƒé€»è¾‘å®Œæ•´
â”œâ”€â”€ api_clients.py âœ… 6ä¸ªAPIå®¢æˆ·ç«¯å®ç°å®Œæ•´
â”œâ”€â”€ models.py âœ… æ•°æ®æ¨¡å‹å®Œæ•´ï¼ˆå·²ä¿®å¤bugï¼‰
â”œâ”€â”€ config.py âœ… é…ç½®å’ŒAPIå¯†é’¥
â”œâ”€â”€ __init__.py âœ… åŒ…åˆå§‹åŒ–
â”œâ”€â”€ SKILL.md âœ… Skillå®šä¹‰
â””â”€â”€ README.md âœ… ä½¿ç”¨æ–‡æ¡£
```

### search.pyï¼ˆç®€åŒ–ç‰ˆï¼‰- æ¨èä½¿ç”¨ âœ…

**ç‰¹ç‚¹**:
- ç›´æ¥å¯æ‰§è¡Œï¼Œæ— å¤æ‚ä¾èµ–
- å†…ç½®Braveå’ŒYou.com APIå¯†é’¥
- æ”¯æŒ3ç§æ¨¡å¼ï¼šfast/auto/deep
- æ”¯æŒ3ç§è¾“å‡ºï¼šjson/markdown/compact
- å¼‚æ­¥å¹¶å‘æœç´¢ï¼Œæ€§èƒ½ä¼˜ç§€

**å¯ç”¨API**:
1. âœ… Brave Search - å·²æµ‹è¯•ï¼Œå·¥ä½œæ­£å¸¸
2. âš ï¸ You.com - å·²æµ‹è¯•ï¼ŒAPIå¯èƒ½æœ‰é™åˆ¶

**ä½¿ç”¨æ–¹æ³•**:
```bash
cd ~/.claude/skills/15-web-search

# å¿«é€Ÿæœç´¢ï¼ˆä»…Braveï¼‰
python search.py "ä½ çš„æŸ¥è¯¢" --mode fast

# æ™ºèƒ½æœç´¢ï¼ˆBrave + You.comï¼‰
python search.py "ä½ çš„æŸ¥è¯¢" --mode auto

# JSONè¾“å‡º
python search.py "ä½ çš„æŸ¥è¯¢" --output json

# Markdownè¾“å‡º
python search.py "ä½ çš„æŸ¥è¯¢" --output markdown
```

### search_cli.py + main.pyï¼ˆå®Œæ•´ç‰ˆï¼‰- æœ‰é—®é¢˜ âš ï¸

**é—®é¢˜**:
- search_cli.pyç¬¬84-90è¡Œæœ‰f-stringåµŒå¥—é—®é¢˜
- å¯¼è‡´`NameError: name 'args' is not defined`
- éœ€è¦å¤æ‚çš„æ¨¡å—å¯¼å…¥å’ŒåŒ…ç»“æ„

**é—®é¢˜åŸå› **:
```python
# ç¬¬50è¡Œå®šä¹‰f-string
python_code = f'''
...
# ç¬¬84-90è¡Œåœ¨f-stringå†…åˆä½¿ç”¨äº†f-stringè¯­æ³•
input_params = WebSearchInput(
    query={json.dumps(args.query)},  # âŒ argsåœ¨å¤–å±‚ä½œç”¨åŸŸä¸å­˜åœ¨
    mode={json.dumps(args.mode)},
    ...
)
'''
```

å½“Pythonè§£æå¤–å±‚f-stringæ—¶ï¼Œä¼šå°è¯•åœ¨**å½“å‰ä½œç”¨åŸŸ**ä¸­æŸ¥æ‰¾`args.query`ç­‰å˜é‡ï¼Œè€Œä¸æ˜¯å°†å…¶ä½œä¸ºç”Ÿæˆä»£ç çš„ä¸€éƒ¨åˆ†ã€‚

---

## ğŸ¤” ä¸ºä»€ä¹ˆä¹‹å‰è¯¯åˆ¤éœ€è¦MCPï¼Ÿ

### é”™è¯¯åˆ†æ

**æˆ‘ä¹‹å‰çš„é”™è¯¯æ€ç»´**:
1. çœ‹åˆ°SKILL.mdä¸­æè¿°"6ä¸ªæœç´¢API"
2. çœ‹åˆ°å¤æ‚çš„åŒ…ç»“æ„ï¼ˆç›¸å¯¹å¯¼å…¥ï¼š`from .models import ...`ï¼‰
3. çœ‹åˆ°api_clients.pyä¸­çš„6ä¸ªAPIå®¢æˆ·ç«¯
4. **å‡è®¾**éœ€è¦MCP serverå°è£…æ‰èƒ½ä½¿ç”¨
5. **æ²¡æœ‰ä»”ç»†æ£€æŸ¥**æ˜¯å¦å·²æœ‰ç®€åŒ–ç‰ˆå®ç°

**çœŸå®æƒ…å†µ**:
- âœ… config.pyä¸­å·²å†…ç½®æ‰€æœ‰APIå¯†é’¥
- âœ… search.pyæä¾›äº†ç®€åŒ–çš„CLIæ¥å£
- âœ… å®Œå…¨ä¸éœ€è¦MCPï¼Œç›´æ¥å¯ç”¨

**æ ¹æœ¬åŸå› **:
- å¥—ç”¨äº†Claude Desktopçš„æ€ç»´æ¨¡å¼ï¼ˆMCPå°è£…å¤–éƒ¨å·¥å…·ï¼‰
- çœ‹åˆ°"å¤–éƒ¨é›†æˆ"æ ‡ç­¾å°±å‡è®¾éœ€è¦é…ç½®
- ç¼ºä¹å®é™…æµ‹è¯•éªŒè¯

---

## ğŸ› å‘ç°å’Œä¿®å¤çš„Bug

### Bug 1: models.pyç¬¬166è¡Œï¼ˆå·²ä¿®å¤ï¼‰

**é”™è¯¯**:
```python
"language": language,  # âŒ æœªå®šä¹‰çš„å˜é‡
```

**ä¿®å¤**:
```python
"language": self.language,  # âœ… ä½¿ç”¨å®ä¾‹å±æ€§
```

### Bug 2: search_cli.pyç¬¬88-89è¡Œï¼ˆå·²ä¿®å¤ï¼Œä½†ä»æœ‰å…¶ä»–é—®é¢˜ï¼‰

**åŸå§‹é”™è¯¯**:
```python
language={json.dumps(args.language) if args.language else "None"},
site_filter=[{json.dumps(args.site)}] if {json.dumps(args.site)} else None,
```

**ä¿®å¤**:
```python
language={json.dumps(args.language) if args.language else None},
site_filter=[{json.dumps(args.site)}] if args.site else None,
```

**ä½†**ï¼šæ•´ä¸ªç¬¬84-90è¡Œéƒ½æœ‰f-stringåµŒå¥—é—®é¢˜ï¼Œå¯¼è‡´ä»ç„¶æ— æ³•è¿è¡Œã€‚

### Bug 3: search_cli.pyçš„f-stringåµŒå¥—é—®é¢˜ï¼ˆæ–°å‘ç°ï¼‰

**é—®é¢˜**: ç¬¬50-139è¡Œæ•´ä¸ªpython_codeæ˜¯ä¸€ä¸ªf-stringï¼Œå†…éƒ¨ç¬¬84-90è¡Œåˆä½¿ç”¨äº†`{args.xxx}`è¯­æ³•ï¼Œå¯¼è‡´å˜é‡ä½œç”¨åŸŸæ··æ·†ã€‚

**å½±å“**: search_cli.pyå®Œå…¨æ— æ³•è¿è¡Œ

**æ˜¯å¦éœ€è¦ä¿®å¤**: **å¦** - å› ä¸ºsearch.pyç®€åŒ–ç‰ˆå·²ç»å®Œå…¨å¯ç”¨

---

## ğŸ’¡ æœ€ç»ˆç»“è®ºå’Œå»ºè®®

### 1. 15-web-searchçš„çœŸå®è¯„çº§

**ä»Bçº§ï¼ˆéœ€è¦é…ç½®ï¼‰ä¸Šè°ƒä¸º A+çº§ï¼ˆç«‹å³å¯ç”¨ï¼‰**

**ç†ç”±**:
- âœ… search.pyç›´æ¥å¯ç”¨ï¼Œå·²éªŒè¯
- âœ… å·²å†…ç½®APIå¯†é’¥
- âœ… æ— éœ€ä»»ä½•å¤–éƒ¨é…ç½®
- âœ… æ€§èƒ½ä¼˜ç§€ï¼ˆ1ç§’å†…è¿”å›ç»“æœï¼‰

### 2. æ¨èä½¿ç”¨æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: ä½¿ç”¨ç®€åŒ–ç‰ˆsearch.pyï¼ˆæ¨èï¼‰âœ…**

```bash
cd ~/.claude/skills/15-web-search
python search.py "ä½ çš„æœç´¢æŸ¥è¯¢" --mode auto --output markdown
```

**ä¼˜ç‚¹**:
- ç®€å•ç›´æ¥ï¼Œæ— å¤æ‚ä¾èµ–
- å·²éªŒè¯å¯ç”¨
- æ€§èƒ½ä¼˜ç§€

**æ–¹æ¡ˆ2: ä¸æ¨èä¿®å¤search_cli.py**

**ç†ç”±**:
- search.pyå·²ç»å®Œå…¨æ»¡è¶³éœ€æ±‚
- search_cli.pyçš„ä¿®å¤éœ€è¦é‡æ„æ•´ä¸ªf-stringç”Ÿæˆé€»è¾‘
- æŠ•å…¥äº§å‡ºæ¯”ä½

### 3. å®Œæ•´ç‰ˆçš„ä»·å€¼

è™½ç„¶search_cli.pyæœ‰é—®é¢˜ï¼Œä½†å®Œæ•´ç‰ˆï¼ˆmain.py + api_clients.pyï¼‰çš„ä»£ç è´¨é‡å¾ˆé«˜ï¼š
- âœ… è¯­ä¹‰å»é‡ï¼ˆä½¿ç”¨Jina Embeddingï¼‰
- âœ… æ™ºèƒ½è·¯ç”±ï¼ˆæ ¹æ®æŸ¥è¯¢ç±»å‹é€‰æ‹©å¼•æ“ï¼‰
- âœ… ç»“æœèšåˆåˆ†æ
- âœ… è´¨é‡æŒ‡æ ‡è®¡ç®—

**æœªæ¥å¯è€ƒè™‘**:
- åˆ›å»ºæ–°çš„CLIåŒ…è£…å™¨è°ƒç”¨main.pyçš„å®Œæ•´åŠŸèƒ½
- æˆ–è€…å°†å®Œæ•´åŠŸèƒ½æ•´åˆåˆ°search.pyä¸­

### 4. APIå¯ç”¨æ€§æ€»ç»“

| API | å¯†é’¥çŠ¶æ€ | æµ‹è¯•çŠ¶æ€ | å¤‡æ³¨ |
|-----|---------|---------|------|
| Brave Search | âœ… å·²å†…ç½® | âœ… å·²éªŒè¯ | å·¥ä½œæ­£å¸¸ |
| You.com | âœ… å·²å†…ç½® | âš ï¸ å¯èƒ½æœ‰é™åˆ¶ | autoæ¨¡å¼ä¸­æœªè¿”å›ç»“æœ |
| Exa.ai | âœ… å·²å†…ç½® | ğŸ”„ æœªæµ‹è¯• | éœ€è¦æµ‹è¯•éªŒè¯ |
| Perplexity | âœ… å·²å†…ç½® | ğŸ”„ æœªæµ‹è¯• | éœ€è¦æµ‹è¯•éªŒè¯ |
| Jina Reader | âœ… å·²å†…ç½® | ğŸ”„ æœªæµ‹è¯• | ç”¨äºå†…å®¹å¢å¼º |
| Jina Embedding | âœ… å·²å†…ç½® | ğŸ”„ æœªæµ‹è¯• | ç”¨äºè¯­ä¹‰å»é‡ |

**ç»“è®º**: è‡³å°‘Brave Searchç¡®è®¤å¯ç”¨ï¼Œå·²è¶³å¤Ÿæ»¡è¶³åŸºæœ¬æœç´¢éœ€æ±‚ã€‚

---

## ğŸ¯ å¯¹REALITY_CHECK.mdçš„ä¿®æ­£

### éœ€è¦æ›´æ–°çš„å†…å®¹

**15-web-search**:
- ä» "ğŸ”µ Açº§ - éœ€è¦MCP server"
- æ›´æ–°ä¸º "ğŸŸ¢ A+çº§ - ç«‹å³å¯ç”¨ï¼ˆä½¿ç”¨search.pyï¼‰"

**ç»Ÿè®¡æ›´æ–°**:
- A+çº§: 22ä¸ª â†’ **23ä¸ª** (61.1% â†’ 63.9%)
- Açº§: 1ä¸ª â†’ **0ä¸ª** (2.8% â†’ 0%)
- å®é™…å¯ç”¨: 63.9% â†’ **63.9%** (23ä¸ª)

---

## âœ… "ä¸€æ¬¡è¿‡å¤„ç†å¥½"æ£€æŸ¥æ¸…å•

- [x] âœ… ä¿®å¤ä»£ç bugï¼ˆmodels.pyå·²ä¿®å¤ï¼‰
- [x] âœ… æµ‹è¯•å®é™…æœç´¢åŠŸèƒ½ï¼ˆsearch.pyå·²éªŒè¯å¯ç”¨ï¼‰
- [x] âœ… æ£€æŸ¥ä¸ºä»€ä¹ˆè¯¯åˆ¤éœ€è¦MCPï¼ˆå·²åˆ†æåŸå› ï¼‰
- [x] âœ… æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼ˆsearch_cli.pyæœ‰f-stringé—®é¢˜ï¼Œä½†ä¸å½±å“ä½¿ç”¨ï¼‰
- [x] âœ… ç¡®è®¤æœ€ç»ˆè¯„çº§ï¼ˆA+çº§ï¼‰
- [x] âœ… æä¾›ä½¿ç”¨å»ºè®®ï¼ˆä½¿ç”¨search.pyï¼‰

---

## ğŸ“ å¿«é€Ÿä½¿ç”¨æŒ‡å—

### ç«‹å³å¼€å§‹ä½¿ç”¨15-web-search

```bash
# è¿›å…¥skillç›®å½•
cd ~/.claude/skills/15-web-search

# ç¤ºä¾‹1: å¿«é€Ÿæœç´¢Pythonç›¸å…³å†…å®¹
python search.py "Python async programming" --mode fast --output compact

# ç¤ºä¾‹2: æ·±åº¦æœç´¢Reactæ–‡æ¡£
python search.py "React Server Components" --mode auto --output markdown

# ç¤ºä¾‹3: JSONæ ¼å¼è¾“å‡ºï¼ˆä¾¿äºç¨‹åºå¤„ç†ï¼‰
python search.py "Claude Code" --mode auto --output json

# ç¤ºä¾‹4: é™åˆ¶ç»“æœæ•°é‡
python search.py "TypeScript" --mode fast --max-results 5
```

**å‚æ•°è¯´æ˜**:
- `--mode`: æœç´¢æ¨¡å¼
  - `fast`: ä»…Braveï¼ˆæœ€å¿«ï¼Œçº¦1ç§’ï¼‰
  - `auto`: Brave + You.comï¼ˆæ¨èï¼‰
  - `deep`: æ‰€æœ‰å¼•æ“ï¼ˆæœªå®ç°ï¼Œé»˜è®¤ä½¿ç”¨autoï¼‰
- `--output`: è¾“å‡ºæ ¼å¼
  - `compact`: ç´§å‡‘åˆ—è¡¨
  - `markdown`: Markdownæ ¼å¼ï¼ˆæ˜“è¯»ï¼‰
  - `json`: JSONæ ¼å¼ï¼ˆæ˜“å¤„ç†ï¼‰
- `--max-results`: æœ€å¤§ç»“æœæ•°ï¼ˆé»˜è®¤10ï¼‰

---

**æŠ¥å‘Šå®Œæˆæ—¶é—´**: 2025-12-16
**ç»“è®º**: 15-web-search **å®Œå…¨å¯ç”¨**ï¼Œè¯„çº§A+ï¼Œæ¨èä½¿ç”¨search.py
